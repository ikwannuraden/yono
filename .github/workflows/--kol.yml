name: Run

on:
  push:
    branches: ["main"]

jobs:
  build:
    env:
      PY_COLORS: "1"
    name: Install Dependencies
    runs-on: ubuntu-latest
    strategy:
      max-parallel: 20
      fail-fast: false
      matrix:
        rangeIndex: [5000 5010,5010 5020,5020 5030,5030 5040,5040 5050,5050 5060,5060 5070,5070 5080,5080 5090,5090 5100,5100 5110,5110 5120,5120 5130,5130 5140,5140 5150,5150 5160,5160 5170,5170 5180,5180 5190,5190 5200,5200 5210,5210 5220,5220 5230,5230 5240,5240 5250,5250 5260,5260 5270,5270 5280,5280 5290,5290 5300,5300 5310,5310 5320,5320 5330,5330 5340,5340 5350,5350 5360,5360 5370,5370 5380,5380 5390,5390 5400,5400 5410,5410 5420,5420 5430,5430 5440,5440 5450,5450 5460,5460 5470,5470 5480,5480 5490,5490 5500,5500 5510,5510 5520,5520 5530,5530 5540,5540 5550,5550 5560,5560 5570,5570 5580,5580 5590,5590 5600,5600 5610,5610 5620,5620 5630,5630 5640,5640 5650,5650 5660,5660 5670,5670 5680,5680 5690,5690 5700,5700 5710,5710 5720,5720 5730,5730 5740,5740 5750,5750 5760,5760 5770,5770 5780,5780 5790,5790 5800,5800 5810,5810 5820,5820 5830,5830 5840,5840 5850,5850 5860,5860 5870,5870 5880,5880 5890,5890 5900,5900 5910,5910 5920,5920 5930,5930 5940,5940 5950,5950 5960,5960 5970,5970 5980,5980 5990,5990 6000,6000 6010,6010 6020,6020 6030,6030 6040,6040 6050,6050 6060,6060 6070,6070 6080,6080 6090,6090 6100,6100 6110,6110 6120,6120 6130,6130 6140,6140 6150,6150 6160,6160 6170,6170 6180,6180 6190,6190 6200,6200 6210,6210 6220,6220 6230,6230 6240,6240 6250,6250 6260,6260 6270,6270 6280,6280 6290,6290 6300,6300 6310,6310 6320,6320 6330,6330 6340,6340 6350,6350 6360,6360 6370,6370 6380,6380 6390,6390 6400,6400 6410,6410 6420,6420 6430,6430 6440,6440 6450,6450 6460,6460 6470,6470 6480,6480 6490,6490 6500,6500 6510,6510 6520,6520 6530,6530 6540,6540 6550,6550 6560,6560 6570,6570 6580,6580 6590,6590 6600,6600 6610,6610 6620,6620 6630,6630 6640,6640 6650,6650 6660,6660 6670,6670 6680,6680 6690,6690 6700,6700 6710,6710 6720,6720 6730,6730 6740,6740 6750,6750 6760,6760 6770,6770 6780,6780 6790,6790 6800,6800 6810,6810 6820,6820 6830,6830 6840,6840 6850,6850 6860,6860 6870,6870 6880,6880 6890,6890 6900,6900 6910,6910 6920,6920 6930,6930 6940,6940 6950,6950 6960,6960 6970,6970 6980,6980 6990,6990 7000,7000 7010,7010 7020,7020 7030,7030 7040,7040 7050,7050 7060,7060 7070,7070 7080,7080 7090,7090 7100,7100 7110,7110 7120,7120 7130,7130 7140,7140 7150,7150 7160,7160 7170,7170 7180,7180 7190,7190 7200,7200 7210,7210 7220,7220 7230,7230 7240,7240 7250,7250 7260,7260 7270,7270 7280,7280 7290,7290 7300,7300 7310,7310 7320,7320 7330,7330 7340,7340 7350,7350 7360,7360 7370,7370 7380,7380 7390,7390 7400,7400 7410,7410 7420,7420 7430,7430 7440,7440 7450,7450 7460,7460 7470,7470 7480,7480 7490,7490 7500]
    steps:
      - uses: actions/checkout@v4
      - name: Install Dependencies
        uses: actions/setup-python@v5
        with:
          python-version: 3.12
      - name: Install
        run: |
          python -m pip install --upgrade pip wheel setuptools
          python -m pip install seleniumbase==4.27.0
          python -m pip install supabase
          python -m pip install requests
          sudo apt install -y google-chrome-stable
          seleniumbase install chromedriver
          sudo apt install -y xvfb
      - name: Run
        run: |
          export DISPLAY=:0
          /usr/bin/Xvfb :0 -screen 0 1024x768x24 &
          sleep 5
          xvfb-run python run-t-kw.py ${{matrix.RangeIndex}}
      - name: done
        run: exit
